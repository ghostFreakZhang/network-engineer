
- [局域网技术](#局域网技术)
  - [整体介绍](#整体介绍)
  - [局域网定义 ⭐](#局域网定义-)
  - [IEEE 802标准 ⭐⭐](#ieee-802标准-)
  - [以太网技术 ⭐⭐⭐](#以太网技术-)
  - [虚拟局域网 ⭐⭐⭐](#虚拟局域网-)
  - [TRUNK、VTP、GVRP ⭐⭐⭐](#trunkvtpgvrp-)
  - [STP ⭐⭐⭐](#stp-)
  - [无线局域网 ⭐⭐⭐](#无线局域网-)
  - [综合布线系统 ⭐⭐](#综合布线系统-)

# 局域网技术

## 整体介绍

局域网，简称为LAN，覆盖范围比较小，主要涉及数据链路层和物理层，不会涉及到路由。

比较重要的章节。

## 局域网定义 ⭐

指有限区域（如办公室或楼层）内的多台计算机通过传输介质互连，所组成的封闭网络，实现数据通信和资源共享的目的。

常用传输介质：双绞线、同轴电缆、光纤、无线等。

常见拓扑形状：总线型、星型、环形。

## IEEE 802标准 ⭐⭐

![ieee-802标准](img/802.png)

**逻辑链路控制子层-服务类型**

![llc](img/llc-func.png)

**介质访问控制子层**

各种介质的访问控制技术的特征由两个因素来区分：
- 在哪里控制
  - 集中式（由一台设备来控制）
  - 分布式（各终端子集控制）
- 怎样控制
  - 同步式
  - 异步式

异步式的方式，重点关注竞争式：
![mac](img/802-mac.png)

在mac子层采用的介质访问控制协议使用的是CSMA/CD协议（局域网中采用的协议）。

**标准**

主要关注：
- 802.1A
- 802.3
- 802.11

![biaozhun](img/802-biaozhun.png)

## 以太网技术 ⭐⭐⭐

**CSMA/CD协议**

共享的以太网会有冲突，冲突发生时信道利用率不高，浪费信道带宽，需要有一个协议降低冲突概率。

对应 IEEE 802.3标准，属于竞争型协议。

![csma/cd](img/csma-cd.png)

- 载波侦听过程（CSMA过程）
  - 监听信道是否空闲，只有信道是空闲时，才会发送数据。
  - 非坚持型监听算法：
    - 监听到信道是空闲的，立即发送数据；
    - 信道忙时，随机后退一个时间，再监听信道状态。
    - 特性：信道利用率不高，可能随机后退的时间过长，导致信道空闲。
  - 1-坚持型监听算法（100%监听）
    - 监听到信道是空闲的，立即发送数据；
    - 信道忙时，继续监听信道；
    - 特性：信道利用率高，冲突概率稍微高；
  - P-坚持型监听算法
    - 监听到信道是空闲的，以概率 P 发送数据；
    - 信道忙时，持续监听信道；
    - 特性：平衡了冲突和抢占信道的关系，P 的取值很关键。

- 冲突检测过程（CD过程）
  - 边发边听，发送数据的时候以帧为单位，一个比特一个比特的发送，听收到的信息和发出去的信息一样不，一样的话就没有冲突，不一样的话就有冲突（冲突会影响信号）。
  - 2倍的传播时延之后，就可以确定不会发生冲突了，2t也叫争用期或者碰撞窗口。
  - 要求发送时延 >= 2t，也就是在发送时就能够检测到冲突。
  - 最短帧长 >= 2 * 传播时延 * 带宽

- 若发现冲突, 停止发送.
- 之后随机延迟重发, 算法如下.

![csma/cd](img/csma-cd-2.png)
基本退避时间 = 2 * 传播时延

**MAC地址**

前3个字节是分配给厂商的, 叫做组织唯一标识符;
后3个字节, 叫做扩展标识符.

![mac](img/mac.png)

**以太网帧格式**

MAC 帧包含5各部分:
- 目的地址和源地址都是mac地址, 各占6个字节
- 类型用于描述上层对应的协议, 占2个字节
- 数据字段
- FCS字段, 校验字段, 占4个字节, 采用CRC-32位校验

在每发送一个 MAC 帧之前, 还有8个字节, 用于同步作用, 叫前导字段.

合法的数据部分长度为46-1500字节, 1500也是数据部分的MTU(最大传输单元), 合法的帧长为64-1518字节(IEEE 标准), 若数据部分的字节不满46字节, 进行0填充, 数据大于1500字节时, 会进行分片.

无效帧:
- 不在合法的帧长范围内
- 最后的CRC校验, 校验出错, 也认为是无效帧, 并让发送方重传
- 取出的帧结构不是字节为单位的二进制比特流

![帧格式](img/frame.png)


## 虚拟局域网 ⭐⭐⭐

## TRUNK、VTP、GVRP ⭐⭐⭐

## STP ⭐⭐⭐

## 无线局域网 ⭐⭐⭐

## 综合布线系统 ⭐⭐
